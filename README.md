# techprog6

## Рефакторинг order_processing.py

### Проблемы качества, найденные в исходном коде:
- Длинная функция `process_checkout` с множеством ответственностей (валидация, расчеты, генерация ID).
- Магические числа разбросаны по коду (ставки скидок, пороги, налоговая ставка).
- Логика смешана: валидация, расчеты и сборка ответа в одной функции.
- Код не читается сверху вниз как сценарий обработки заказа.

### Примененные рефакторинги:
- **Извлечение методов**: Разбил `process_checkout` на отдельные функции: `validate_request`, `calculate_subtotal`, `calculate_discount`, `calculate_tax`, `generate_order_id`.
- **Вынесение констант**: Все магические числа вынесены в константы в начале файла (TAX_RATE, SAVE10_RATE и т.д.).
- **Улучшение читаемости**: Функция `process_checkout` теперь читается как последовательность шагов обработки заказа.
- **Использование встроенных функций**: Заменил цикл на `sum` с генератором для расчета subtotal.

### Что стало проще читать и менять:
- **Читаемость**: Код теперь структурирован как сценарий: разбор -> валидация -> расчеты -> сборка ответа.
- **Изменяемость**: Логика скидок, налогов и валидации вынесена в отдельные функции, что упрощает модификацию (например, добавление новых купонов).
- **Поддерживаемость**: Константы позволяют легко изменять ставки без поиска по коду.
- **Тестируемость**: Отдельные функции легче тестировать изолированно.
